<div class="row">
  <div class="col-sm-12 col-mb-12">
    <div class="card bg-dark text-white o-hidden mb-4">
      <!-- <img class="card-img" src="./assets/images/avgen2.jpg" alt="Card image"> -->
    </div>
  </div>
</div>


<div class="row">
  <div class="col-md-12">

    <div class="card mb-4">
      <div class="card-body">

        <div class="row">
          <div class="col-sm-4 col-mb-4">
            <img class="card-img" width="200" height="500" src="http://localhost:8000/images/movie/{{movie?.movie_pic}}" alt="Card image">
          </div>

          <div class="col-sm-8 col-mb-8">
            <div class="row">
              <div class="col-sm-6 col-mb-6">
                <p class="font">{{ movie?.name_en }}</p>
                <p class="font1">{{ movie?.name_th }}</p>
                <p class="font2">ผู้กำกับ : {{ movie?.director }}</p>
              </div>
              <div class="col-sm-6 col-mb-6" class="button-center">
                <button type="button" class="btn btn-outline-primary btn-rounded m-1"
                  (click)="packageView(movie?.id)">ระดมทุน</button>
              </div>
            </div>

            <p class="font2">ประเภท : {{ movie?.category?.name }}</p>
            <p>
              {{ movie?.description }}</p>


            <div class="row">
              <div class="col-sm-6 col-mb-6">
                <p class="font2">ยอดปัจจุบัน</p>
                <p class="font3">{{ movie?.current_total }} ฿</p>
              </div>

              <div class="col-sm-6 col-mb-6">
                <p class="font2">ยอดระดมทุนที่ต้องการ</p>
                <p class="font4">{{ movie?.total }} ฿</p>
              </div>
            </div>

            <!-- <span class="mr-3 d-flex align-items-center"><i class="i-Speach-Bubble-6 mr-1"></i> 12 </span>
                    <span class="d-flex align-items-center"><i class="i-Calendar-4 mr-2"></i>03.12.2018</span> -->

          </div>
        </div>

        <div class="card-body">
          <ngb-tabset class="">

            <ngb-tab title="รายละเอียด">
              <ng-template ngbTabContent>

                <p>เรื่องย่อ : {{ movie?.resume }}</p>
                <button type="button" class="btn btn-primary btn-rounded m-1" (click)="open(modalEdit)">แก้ไขข้อมูล</button>
                 <!-- ----------------------------------------------------- -->
                 <ng-template #modalEdit let-modal>
                  <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">แก้ไขข้อมูลภาพยนตร์</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <form (submit)="editMovie(formMovie)" #formMovie="ngForm">

                      <div class="row">
                        <div class="col-md-6 form-group mb-3">
                          <label for="topic"> ชื่อภาพยนตร์ภาษาไทย </label>
                          <input type="text" class="form-control form-control-rounded" name="name_th" ngModel
                            placeholder="{{movie.name_th}}">
                        </div>
                        <div class="col-md-6 form-group mb-3">
                          <label for="topic"> ชื่อภาพยนตร์ภาษาอังกฤษ </label>
                          <input type="text" class="form-control form-control-rounded" name="name_en" ngModel
                            placeholder="{{movie.name_en}}">
                        </div>
                      </div>

                        <div class="col-md-12 form-group mb-5">
                          <label for="topic"> เรื่องย่อ </label>
                          <textarea type="text" class="form-control form-control-rounded" name="resume" ngModel
                            placeholder="{{movie.resume}}"></textarea>
                        </div>
                        <div class="col-md-12 form-group mb-5">
                          <label for="topic"> รายละเอียด </label>
                          <textarea type="text" class="form-control form-control-rounded" name="description" ngModel
                            placeholder="{{movie.description}}"></textarea>
                        </div>

                        <div class="row">
                          <div class="col-md-6 form-group mb-3">
                            <label for="topic"> ชื่อผู้กำกับ </label>
                            <input type="text" class="form-control form-control-rounded" name="director" ngModel
                              placeholder="{{movie.director}}">
                          </div>
                          <div class="col-md-6 form-group mb-3">
                            <label for="topic"> ยอดปัจจุบัน </label>
                            <input type="text" class="form-control form-control-rounded" name="current_total" ngModel
                              placeholder="{{movie.current_total}}">
                          </div>
                        </div>

                        <div class="col-md-12 form-group mb-3">
                          <label>วันปิดระดมทุน</label>
                          <input type="date" class="form-control form-control-rounded" name="end_date" ngModel
                            placeholder="{{movie.end_date}}">
                        </div>


                      <!-- <div class="row">
                        <div class="col-sm-6 col-mb-6">
                          <div class="form-group">
                          <h5>ผ่านการตรวจสอบ</h5>
                          <input type="radio" id="confirm" name="status" ngModel value="confirm">
                          <label for="confirm"></label>
                          </div>
                        </div>

                        <div class="col-sm-6 col-mb-6">
                          <div class="form-group">
                          <h5>ไม่ผ่านการตรวจสอบ</h5>
                          <input type="radio" id="unsuccessful" name="status" ngModel value="unsuccessful">
                          <label for="unsuccessful"></label>
                          </div>
                        </div>
                      </div> -->

                          <div class="modal-footer">
                            <button type="submit" class="btn btn-primary btn-block">บันทึกข้อมูล</button>
                          </div>
                    </form>
                  </div>

                </ng-template>

                <!-- --------------------------------------------------------------- -->
              </ng-template>
            </ngb-tab>

            <ngb-tab title="ความคืบหน้า">
              <ng-template ngbTabContent>
                <button type="button" class="btn btn-primary btn-rounded m-1" (click)="progressAdd(id)">เพิ่มความคืบหน้า</button>

                <div class="col-sm-12 col-mb-12" *ngFor="let progress of progresses">
                  <div class="card mb-12">
                    <div class="card-body p-0">
                      <div class="card-title border-bottom d-flex align-items-center m-3 p-3">
                        <span>รายละเอียดความคืบหน้า</span>
                        <span class="flex-grow-1"></span>
                      </div>
                      <br>
                      <div class="col-md-6 form-group mb-0">
                        <div class="shadow p-3 mb-5 bg-white rounded">หัวข้อ : {{ progress.topic }}</div>
                      </div>
                      <div class="col-md-5">
                        <div class="text-center">
                          <br><img class="card-img" width="500" height="250" src="{{progress?.picture}}" alt="Card image">
                          <!-- {{ progress.picture }} -->
                        </div>
                      </div>

                      <br>

                      <div class="col-md-6 form-group mb-3">
                        <div class="shadow p-3 mb-5 bg-white rounded">รายละเอียด : {{ progress.detail }}</div>
                        <div class="shadow p-3 mb-5 bg-white rounded">วัน/เดือน/ปี : {{ progress.date }}</div>
                      </div>

                      <button type="button" class="btn btn-light btn-rounded bg-white m-3 my-0"
                        (click)="deletePro(movie.id, progress.id)">ลบ</button>
                    </div>
                  </div>
                </div>

              </ng-template>
            </ngb-tab>

            <ngb-tab title="ข้อมูลการโอนเงิน">
              <ng-template ngbTabContent>

                <div class="col-sm-12 col-mb-12">
                  <P class="font1">สถานะการโอน</P>

                  <div class="card-body">
                    <ngb-tabset class="">

                      <ngb-tab title="ตรวจสอบสำเร็จ">
                        <ng-template ngbTabContent>

                          <!-- --------------------------------------------ข้อมูล 1 -------------------------------------------- -->
                          <div class="row">
                            <div class="col-sm-8 col-mb-8" *ngFor="let transfer of adconfirm">
                              <div class="card mb-12">
                                <div class="card-header">

                                </div>
                                <div class="card-body">
                                  <h4 class="card-title" class="font2">ชื่อแพ็คเกจที่เลือก : {{transfer.package?.topic}}</h4><br>
                                  <p class="card-text">ชื่อผู้ใช้ : {{transfer.user?.name}}</p>
                                  <!-- <h5 class="card-text">Reward</h5> -->
                                  <p class="card-text">วันที่โอน : {{transfer.transfer_date}}</p>
                                  <ul class="list-group list-group-flush">
                                    <div class="row">
                                      <div class="col-sm-12 col-mb-12">
                                        <h5 class="list-group-item">จำนวนเงิน : {{transfer.transfer_amount}} บาท</h5>
                                      </div>

                                    </div>
                                  </ul>

                                </div>
                              </div>
                            </div>
                            <div class="col-sm-2 col-mb-2"></div>
                          </div>
                          <br>

                        </ng-template>
                      </ngb-tab>

                      <ngb-tab title="ยังไม่ตรวจสอบ">
                        <ng-template ngbTabContent>
                          <!-- --------------------------------------------ข้อมูล 1 -------------------------------------------- -->
                          <div class="row">
                            <div class="col-sm-8 col-mb-8" *ngFor="let transfer of adnot">
                              <div class="card mb-12">
                                <div class="card-header">

                                </div>
                                <div class="card-body">
                                  <h4 class="card-title" class="font2">ชื่อแพ็คเกจที่เลือก : {{transfer.package?.topic}}</h4><br>
                                  <p class="card-text">ชื่อผู้ใช้ : {{transfer.user?.name}}</p>
                                  <!-- <h5 class="card-text">Reward</h5> -->
                                  <p class="card-text">วันที่โอน : {{transfer.transfer_date}}</p>
                                  <ul class="list-group list-group-flush">
                                    <div class="row">
                                      <div class="col-sm-8 col-mb-8">
                                        <h5 class="list-group-item">จำนวนเงิน : {{transfer.transfer_amount}} บาท</h5>
                                      </div>
                                      <div class="col-sm-4 col-mb-4">
                                        <button type="button" class="btn btn-light btn-rounded bg-white m-1 my-0"
                                        (click)="open(modalBasic)">อัพเดตสถานะ</button>
                                         </div>
                                    </div>
                                  </ul>
                                </div>

                                <div class="row">

                                  <div class="col-sm-3 col-mb-3"></div>

                                  <div class="col-sm-6 col-mb-6">
                                    <img class="card-img" width="500" height="500" src="http://localhost:8000/images/transfer/{{transfer?.transfer_pic}}" alt="Card image">
                                  </div>

                                  <div class="col-sm-3 col-mb-3"></div>

                                </div>


                              </div>

                              <!-- ----------------------------------------------------- -->
                              <ng-template #modalBasic let-modal>
                                <div class="modal-header">
                                  <h4 class="modal-title" id="modal-basic-title">อนุมัติการตรวจสอบ</h4>
                                  <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <form (submit)="editStatus(formStatus)" #formStatus="ngForm">
                                    <p>รหัสการแก้ไข : {{transfer.id}}</p>

                                    <div class="col-md-5 form-group mb-3">
                                      <label for="topic"> กรอกตัวเลขด้านบน </label>
                                      <input type="text" class="form-control form-control-rounded" name="transfer_id" ngModel
                                        placeholder="{{transfer.id}}">
                                    </div>

                                    <div class="row">
                                      <div class="col-sm-6 col-mb-6">
                                        <div class="form-group">
                                        <h5>ผ่านการตรวจสอบ</h5>
                                        <input type="radio" id="confirm" name="status" ngModel value="confirm">
                                        <label for="confirm"></label>
                                        </div>
                                      </div>

                                      <div class="col-sm-6 col-mb-6">
                                        <div class="form-group">
                                        <h5>ไม่ผ่านการตรวจสอบ</h5>
                                        <input type="radio" id="unsuccessful" name="status" ngModel value="unsuccessful">
                                        <label for="unsuccessful"></label>
                                        </div>
                                      </div>
                                    </div>

                                        <div class="modal-footer">
                                          <button type="submit" class="btn btn-primary btn-block">บันทึกข้อมูล</button>
                                        </div>
                                  </form>
                                </div>

                              </ng-template>

                              <!-- --------------------------------------------------------------- -->


                            </div>
                          </div>
                          <br>


                        </ng-template>
                      </ngb-tab>

                      <ngb-tab title="ตรวจสอบไม่สำเร็จ">
                        <ng-template ngbTabContent>
                          <!-- --------------------------------------------ข้อมูล 1 -------------------------------------------- -->
                          <div class="row">
                            <div class="col-sm-8 col-mb-8" *ngFor="let transfer of adun">
                              <div class="card mb-12">
                                <div class="card-header">

                                </div>
                                <div class="card-body">
                                  <h4 class="card-title" class="font2">ชื่อแพ็คเกจที่เลือก : {{transfer.package?.topic}}</h4><br>
                                  <p class="card-text">ชื่อผู้ใช้ : {{transfer.user?.name}}</p>
                                  <!-- <h5 class="card-text">Reward</h5> -->
                                  <p class="card-text">วันที่โอน : {{transfer.transfer_date}}</p>
                                  <ul class="list-group list-group-flush">
                                    <div class="row">
                                      <div class="col-sm-12 col-mb-12">
                                        <h5 class="list-group-item">จำนวนเงิน : {{transfer.transfer_amount}} บาท</h5>
                                      </div>

                                    </div>
                                  </ul>

                                </div>
                              </div>
                            </div>
                            <div class="col-sm-2 col-mb-2"></div>
                          </div>
                          <br>

                        </ng-template>
                      </ngb-tab>

                    </ngb-tabset>
                  </div>
                </div>

              </ng-template>
            </ngb-tab>

            <ngb-tab title="ข้อมูลการส่งเงิน">
              <ng-template ngbTabContent>
                <!-- --------------------------------------------ข้อมูล 1 -------------------------------------------- -->
                <div class="row">
                  <div class="col-sm-8 col-mb-8" *ngFor="let sendmoney of sendmoneys">
                    <div class="card mb-12">
                      <div class="card-header">

                      </div>
                      <div class="card-body">
                        <h4 class="card-title" class="font2">{{sendmoney?.topic}}</h4><br>
                        <p class="card-text">รายละเอียด : {{sendmoney?.details}}</p>
                        <!-- <h5 class="card-text">Reward</h5> -->
                        <p class="card-text">วันที่โอน : {{sendmoney?.sendmoney_date}}</p>
                        <ul class="list-group list-group-flush">
                          <div class="row">
                            <div class="col-sm-12 col-mb-12">
                              <h5 class="list-group-item">จำนวนเงิน : {{sendmoney?.amount}} บาท</h5>
                            </div>
                          </div>
                        </ul>
                        <br>
                        <div class="row">

                          <div class="col-sm-3 col-mb-3"></div>

                          <div class="col-sm-6 col-mb-6">
                            <img class="card-img" width="500" height="500" src="http://localhost:8000/images/sendmoney/{{sendmoney?.sendmoney_pic}}" alt="Card image">
                          </div>

                          <div class="col-sm-3 col-mb-3"></div>

                        </div>
                        <br>

                      </div>
                    </div>
                  </div>
                  <div class="col-sm-2 col-mb-2"></div>
                </div>
                <br>

              </ng-template>
            </ngb-tab>

          </ngb-tabset>
        </div>

      </div>
    </div>
